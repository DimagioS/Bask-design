let inputTel=document.querySelectorAll('input[type="tel"]'),im=new Inputmask("+7 (999) 999-99-99");im.mask(inputTel);let modal=document.querySelector(".modal"),body=document.querySelector("body"),openModalBtn=document.querySelectorAll(".contacts__submit-btn"),activeBtn=null,isClickButtonInWindow=!1;openModalBtn.forEach(e=>{e.addEventListener("click",()=>{activeBtn=e,modal.classList.remove("modal-hide"),e.classList.add("contacts__submit-btn-active")})}),document.addEventListener("click",e=>{"close"!=e.target.dataset.close||isClickButtonInWindow||(modal.classList.add("modal-hide"),activeBtn.classList.remove("contacts__submit-btn-active"),activeBtn=null)});const button=document.querySelectorAll(".send-btn"),submit=document.querySelectorAll(".send-btn__submit");function addClass(e){this.classList.add("finished"),setTimeout(()=>{this.classList.remove("finished"),modal.classList.add("modal-hide"),e.target.classList.contains("modal-send-btn")&&activeBtn.classList.remove("contacts__submit-btn-active"),activeBtn=null,isClickButtonInWindow=!1},2e3)}button.forEach(e=>{e.addEventListener("click",(function(t){let n=t.target.closest(".form").querySelector(".form__input-phone"),s=t.target.closest(".form").querySelector(".form__input-name");-1==n.value.split("").indexOf("_")&&""!=n.value&&""!=s.value&&(e.classList.toggle("active"),isClickButtonInWindow=!0)}))}),button.forEach(e=>{e.addEventListener("transitionend",(function(){this.classList.toggle("active"),isClickButtonInWindow=!0}))}),button.forEach(e=>{e.addEventListener("transitionend",addClass)});let main_slider=new Swiper(".swiper",{observer:!0,observeParents:!0,slidesPerView:1,spaceBetween:30,speed:800,loop:!0,navigation:{nextEl:".arrow-next",prevEl:".arrow-prev"},pagination:{el:".swiper-pagination",clickable:!0},on:{lazyImageReady:function(){ibg()}}}),validateForms=function(e,t){new window.JustValidate(e,{rules:t,messages:{name:{required:"Это поле обязательно"},tel:{required:"Это поле обязательно",strength:"Заполните поле полностью"}},submitHandler:function(e){let t=new FormData(e),n=new XMLHttpRequest;n.onreadystatechange=function(){console.log(n.responseText)},n.open("POST","../../send.php",!0),n.send(t),e.reset()}})};validateForms(".modal-form",{name:{required:!0},tel:{required:!0,strength:{custom:"[^_]$"}}});